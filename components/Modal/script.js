!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../../components/Theme"),require("../../components/TouchCapture"),require("../../components/TransitionFadeIn"),require("../../components/TransitionResponsive"),require("../../utils/RenderFn"),require("../../utils/assert"),require("../../utils/css-validator"),require("../../utils/transitions"),require("lodash/throttle"),require("vue"));else if("function"==typeof define&&define.amd)define(["../../components/Theme","../../components/TouchCapture","../../components/TransitionFadeIn","../../components/TransitionResponsive","../../utils/RenderFn","../../utils/assert","../../utils/css-validator","../../utils/transitions","lodash/throttle","vue"],t);else{var o="object"==typeof exports?t(require("../../components/Theme"),require("../../components/TouchCapture"),require("../../components/TransitionFadeIn"),require("../../components/TransitionResponsive"),require("../../utils/RenderFn"),require("../../utils/assert"),require("../../utils/css-validator"),require("../../utils/transitions"),require("lodash/throttle"),require("vue")):t(e["../../components/Theme"],e["../../components/TouchCapture"],e["../../components/TransitionFadeIn"],e["../../components/TransitionResponsive"],e["../../utils/RenderFn"],e["../../utils/assert"],e["../../utils/css-validator"],e["../../utils/transitions"],e["lodash/throttle"],e.vue);for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(this,(function(e,t,o,n,s,r,i,a,l,c){return(()=>{var d={89:function(e){e.exports=function(){"use strict";var e=function(e){var t=e.props,o=e.data,n=e.parent,s=function e(t){return Array.isArray(t)?(o=t=>e(t),t.reduce(((e,t)=>e.concat(o(t))),[])):null!==(n=t)&&"object"==typeof n?function(e){let t=[];for(const o in e)e[o]&&t.push(o);return t}(t):"string"==typeof t&&t?[t]:[];var o,n}([o.staticClass,o.class]);if(s){var r,i,a,l=(i=(r=t).body,a=r.document,i?window.document.body:!!a&&window.document.documentElement);if(l){var c=function(e,t){if(!t.length)return;const{classList:o}=e;return t.filter((e=>{if(!o.contains(e))return o.add(e),!0}))}(l,s),d=function(){!function(e,t){if(!t||!t.length)return;let o;for(;o=t.shift();)e.classList.remove(o);e.classList.length||e.removeAttribute("class")}(l,c)};n.$once("hook:beforeUpdate",d),n.$once("hook:destroyed",d)}}},t=Object.prototype.hasOwnProperty,o=function(e,t,o){var n="&"===t[0],s="~"===(t=n?t.slice(1):t)[0],r="!"===(t=s?t.slice(1):t)[0];return{o:e,t:t=r?t.slice(1):t,i:o,u:{once:s,capture:r,passive:n}}},n=function(e){var n,s,r,i=e.props,a=e.listeners,l=e.parent,c=function(e,n){var s,r,i=[];for(var a in n)if(s=n,r=a,t.call(s,r)){var l=n[a],c=o(e,a,l);c.o.addEventListener(c.t,c.i,c.u),i.push(c)}return i}((s=(n=i).body,r=n.document,s?window.document.body:r?window.document:window),a),d=function(){!function(e){for(var t;t=e.shift();)t.o.removeEventListener(t.t,t.i,t.u)}(c)};l.$once("hook:beforeUpdate",d),l.$once("hook:destroyed",d)},s=function(t){n(t),e(t)};return{name:"pseudo-window",functional:!0,props:{document:Boolean,body:Boolean},render:function(e,t){return t.parent._isMounted?s(t):t.parent.$once("hook:mounted",(function(){s(t)})),t.slots().default}}}()},219:t=>{"use strict";t.exports=e},138:e=>{"use strict";e.exports=t},403:e=>{"use strict";e.exports=o},216:e=>{"use strict";e.exports=n},296:e=>{"use strict";e.exports=s},455:e=>{"use strict";e.exports=r},948:e=>{"use strict";e.exports=i},387:e=>{"use strict";e.exports=a},400:e=>{"use strict";e.exports=l},103:e=>{"use strict";e.exports=c}},u={};function p(e){var t=u[e];if(void 0!==t)return t.exports;var o=u[e]={exports:{}};return d[e].call(o.exports,o,o.exports,p),o.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var o in t)p.o(t,o)&&!p.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var f={};return(()=>{"use strict";p.r(f),p.d(f,{MModal:()=>c,MModalContent:()=>u,MModalLayer:()=>k,modalApi:()=>e,useModalLayer:()=>g});const e=Symbol("modalApiKey");var t=p(400),o=p.n(t),n=p(948),s=p.n(n),r=p(219);const i={name:"Modal",components:{MTouchCapture:p(138).MTouchCapture},inject:{modalApi:e,theme:{default:(0,r.defaultTheme)(),from:r.MThemeKey}},props:{beforeClose:{type:Function,default:void 0},bgColor:{type:String,default:void 0,validator:s()("color")},color:{type:String,default:void 0,validator:s()("color")},closeOnSwipeDown:{type:Boolean,default:!0}},data(){return{modalStyles:{},isScrolledToTop:!0,onScroll:o()(this.setScrollTop,800),preventDefault:!1}},computed:{...(0,r.resolveThemeableProps)("modal",["bgColor","color"]),style(){return{"--bg-color":this.resolvedBgColor,"--color":this.resolvedColor,...this.modalStyles}}},watch:{beforeClose:{immediate:!0,handler(e){this.modalApi.registerBeforeCloseHook(e)}}},methods:{setScrollTop(){var e,t,o;if(!this.closeOnSwipeDown)return;const n=(null===(e=this.$refs)||void 0===e||null===(t=e.modal)||void 0===t||null===(o=t.$el)||void 0===o?void 0:o.scrollTop)||0;this.isScrolledToTop=n<=0},onSwipeDown(){this.closeOnSwipeDown&&this.isScrolledToTop&&(this.preventDefault=!0,this.modalApi.close())},onDragDown(e){if(this.closeOnSwipeDown&&this.isScrolledToTop){this.preventDefault=!0;const t="translateY(".concat(e.changeY,"px)");this.modalStyles={transform:t,"backface-visibility":"hidden",overflow:"hidden",transition:"none"}}},onDragEnd(e){if(!this.closeOnSwipeDown)return;const t=.3*window.innerHeight;this.isScrolledToTop&&e.changeY>t?this.modalApi.close():(this.preventDefault=!1,this.modalStyles={})}}},a={Modal:"ðŸ“š0-0-0-semantic-releaselWZo9"};function l(e,t,o,n,s,r,i,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=o,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):s&&(l=a?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}const c=l(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("m-touch-capture",{ref:"modal",class:e.$s.Modal,style:e.style,attrs:{"prevent-default":e.preventDefault},on:{"on-drag-down":e.onDragDown,"on-drag-end":e.onDragEnd,"on-swipe-down":e.onSwipeDown},nativeOn:{scroll:function(t){return e.onScroll.apply(null,arguments)}}},[e._t("default")],2)}),[],!1,(function(e){this.$s=a.locals||a}),null,null).exports;const d={ModalContent:"ðŸ“š0-0-0-semantic-releaseEYuNB"};const u=l({},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$s.ModalContent},[e._t("default")],2)}),[],!1,(function(e){this.$s=d.locals||d}),null,null).exports;var h=p(103),m=p(89),v=p.n(m),y=p(455),w=p.n(y),C=p(403),M=p(216),T=p(387),b=p(296);function S(e){return"object"==typeof e&&"function"==typeof e.then}async function _(e){if(!e)return!0;if(e.state.children>1)return!1;if("function"==typeof e.state.localBeforeCloseHook){const t=e.state.localBeforeCloseHook();if(S(t))return t.then((t=>!!t&&("function"!=typeof e.state.options.beforeCloseHook||e.state.options.beforeCloseHook()))).then((t=>!!t&&(e.state.renderFn=void 0,e.uncountChild(),!0)));if(!t)return!1}if("function"==typeof e.state.options.beforeCloseHook){const t=e.state.options.beforeCloseHook();if(S(t))return t.then((t=>!!t&&(e.state.renderFn=void 0,e.uncountChild(),!0)));if(!t)return!1}return e.state.renderFn=void 0,e.uncountChild(),!0}function F(e){return{state:(0,h.reactive)({renderFn:void 0,localBeforeCloseHook:void 0,children:0,options:{},isStacked:!!e}),open(e,t={}){return!this.state.renderFn&&(this.state.renderFn=e,this.state.options=t,this.countChild(),()=>this.state.renderFn===e?(_(this),!0):!this.state.renderFn)},countChild(){this.state.children+=1,null==e||e.countChild()},uncountChild(){this.state.children-=1,null==e||e.uncountChild()},registerBeforeCloseHook(t){if(!e){if(!t)return;w().error(!1,"Cannot set the beforeClose prop on a Modal if it is mounted outside of an ModalLayer","Modal")}e.state.localBeforeCloseHook=t},close:async()=>_(e),async closeAll(){return!!await this.close()&&(!e||await e.closeAll())}}}const g=()=>{const t=(0,h.inject)(e,void 0),o=F(t);return(0,h.provide)(e,o),{modalApi:t||o}},x={inject:{parentModalApi:{default:void 0,from:e}},provide(){const t=F(this.parentModalApi);return this.modalApi||(this.modalApi=t),{[e]:t}}},A={name:"ModalLayer",components:{RenderFn:p.n(b)(),PseudoWindow:v(),MTransitionFadeIn:C.MTransitionFadeIn,MTransitionResponsive:M.MTransitionResponsive},mixins:[x],inheritAttrs:!1,apiMixin:x,useModalLayer:g,data(){let e=T.floatUpFn,t=T.floatDownFn;return this.parentModalApi.state.isStacked&&(e=T.delayedFloatUpFn,t=T.floatDownFn),{transitions:[{minWidth:T.mobileMinWidth,enter:T.springUpFn,leave:T.springDownFn},{minWidth:T.tabletMinWidth,enter:e,leave:t}]}},mounted(){const e=this;this.unwatchStackedModal=this.$watch((()=>e.modalApi.state.renderFn),(()=>{const t=window.innerWidth>=T.tabletMinWidth,o=!t,n=!!e.modalApi.state.renderFn,s=!n,r=this.$refs.baseModalLayer;r&&(t&&n?(0,T.fadeOutFn)({element:r}):t&&s?(0,T.delayedFadeInFn)({element:r}):o&&n?setTimeout((()=>{r.style.opacity="0%"}),T.springDelay):o&&s&&r.style.removeProperty("opacity"))}))},destroyed(){this.unwatchStackedModal()},methods:{closeOnClickOutside(e){const{closeOnClickOutside:t}=this.parentModalApi.state.options,{modal:o}=this.$refs;o&&t&&!o.contains(e.target)&&this.modalApi.close()},closeOnEsc(){const{closeOnEsc:e}=this.parentModalApi.state.options,{modal:t}=this.$refs;t&&e&&this.modalApi.close()}}},$={Layer:"ðŸ“š0-0-0-semantic-release_MzTS",ModalLayer:"ðŸ“š0-0-0-semantic-releaseKtxAY",Translucent:"ðŸ“š0-0-0-semantic-releaseXItK4",Transparent:"ðŸ“š0-0-0-semantic-releasePPufJ",disableScroll:"ðŸ“š0-0-0-semantic-releaseQb9Nw",Container:"ðŸ“š0-0-0-semantic-releaseAm6mM"};const k=l(A,(function(){var e,t=this,o=t.$createElement,n=t._self._c||o;return n("div",{class:t.$s.Layer},[n("m-transition-fade-in",[t.parentModalApi.state.renderFn?n("div",{class:[t.$s.Translucent,(e={},e[t.$s.Transparent]=t.parentModalApi.state.isStacked,e)]}):t._e()]),t._v(" "),n("m-transition-responsive",{attrs:{transitions:t.transitions}},[t.parentModalApi.state.renderFn?n("div",{ref:"baseModalLayer",class:t.$s.ModalLayer,on:{"!click":function(e){return t.closeOnClickOutside.apply(null,arguments)}}},[n("pseudo-window",{class:t.$s.disableScroll,attrs:{body:""}}),t._v(" "),n("pseudo-window",{attrs:{document:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeOnEsc.apply(null,arguments)}}}),t._v(" "),n("div",{ref:"modal",class:t.$s.Container},[n("render-fn",{attrs:{"render-fn":t.parentModalApi.state.renderFn}})],1)],1):t._e()]),t._v(" "),t.parentModalApi.state.renderFn?n("modal-layer"):t._e()],1)}),[],!1,(function(e){this.$s=$.locals||$}),null,null).exports})(),f})()}));
//# sourceMappingURL=script.js.map